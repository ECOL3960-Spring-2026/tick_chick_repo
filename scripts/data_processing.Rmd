---
title: "Data Processing"
output: html_document
date: "2026-02-19"
---

# Import and Load Packages

```{r load packages, message = FALSE}

#install.packages("tidyverse")
#install.packages("here")
#install.packages("dplyr")
install.packages("lubridate")


library(tidyverse)
library(here)
library(dplyr)
library(lubridate)

```

***

# Relative Humidity Data

## Processed CSV 

```{r, process relative humidity data, warning=FALSE}

# Access humidity data CSV and select useful columns
# WARNING: file not stored in GitHub because raw data file is too large :(

humidity_data <- read_csv(here("data","raw","relative_humidity_data.csv"))

temperature_data <- humidity_data %>% 
  select(siteID, startDateTime, endDateTime, tempRHMean)

temperature_data %>% 
  write_csv(here("data","processed","temperature_data.csv"))

```

## Calculate Daily and Monthly Temperatures

```{r, calculate temperature data, warning=FALSE}

temperature_data <- read_csv(here("data","processed","temperature_data.csv"))

# Create table with daily mean, max, min temperatures

daily_temp_data <- temperature_data |> 
  mutate(
    date = as_date(startDateTime),
  ) |>
  group_by(siteID, date) |>
  summarize(
    mean_temp = mean(tempRHMean, na.rm = TRUE),
    max_temp = max(tempRHMean, na.rm = TRUE),
    min_temp = min(tempRHMean, na.rm = TRUE)
  )

daily_temp_data |> write_csv(here("data","processed","daily_temp_data.csv"))

# Create table with monthly/year mean, max, min temperatures

monthly_temp_data <- temperature_data |>
  mutate(
    date = as_date(startDateTime),
    month = month(date),
    year = year(date)
  ) |>
  group_by(siteID, year, month) |>
  summarize(
    mean_temp = mean(tempRHMean, na.rm = TRUE),
    max_temp = max(tempRHMean, na.rm = TRUE),
    min_temp = min(tempRHMean, na.rm = TRUE)
  )

monthly_temp_data |> write_csv(here("data","processed","monthly_temp_data.csv"))


```


***

# Tick Abundance Data

## Processed CSV 

```{r, process tick abundance data, warning=FALSE}

# Access tick abundance data CSV and select useful columns

abundance_data <- read_csv(here("data","raw","tick_abundance_data.csv"))

abundance_data <- abundance_data %>% 
  select(siteID, plotID, plotType, nlcdClass, elevation, collectDate, eventID, sampleID,
         samplingMethod, adultCount, nymphCount, larvaCount)

abundance_data %>% 
  write_csv(here("data","processed","abundance_data.csv"))

```

## 

***

# Tick Pathogen Status Data

## Processed CSV 

```{r, process tick pathogen status data, warning=FALSE}

# Access tick pathogen status data CSV and select useful columns

pathogen_status_data <- read_csv(here("data","raw","tick_pathogen_status_data.csv"))

pathogen_status_data <- pathogen_status_data %>% 
  select(siteID, plotID, plotType, nlcdClass, elevation, collectDate, individualCount, testResult, 
         testPathogenName, subsampleID)

pathogen_status_data %>% 
  write_csv(here("data","processed","pathogen_status_data.csv"))

```